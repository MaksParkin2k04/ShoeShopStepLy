# Мультитенантная система администрирования

## Описание
Новая система позволяет создавать и управлять несколькими компаниями через единую платформу администрирования. Каждая компания имеет свой уникальный URL и изолированное управление.

## Основные возможности

### 1. Регистрация компании
- URL: `/Company/Register`
- Поля: название, сокращенное название, email, телефон, описание
- Автоматическое создание администратора компании

### 2. Доступ к админке компании
- URL: `https://site.com/НАЗВАНИЕ_КОМПАНИИ/Index`
- Пример: `https://zpbv37ws-7002.euw.devtunnels.ms/demo/Index`

### 3. Выбор компании
- URL: `/companies`
- Список всех компаний пользователя
- Возможность создания новой компании

## Структура URL

```
/companies                    - Выбор компании
/Company/Register            - Регистрация новой компании
/{shortName}/Index           - Главная админки компании
/{shortName}/Admin/Index     - Админка компании (детальная)
```

## Модели данных

### Company
- Id, Name, ShortName (уникальное)
- ContactEmail, ContactPhone
- CreatedDate, IsActive
- LogoPath, PrimaryColor, SecondaryColor

### CompanyUser
- Связь пользователя с компанией
- Роли: Admin, Manager, Viewer
- Контроль доступа

## Безопасность
- Проверка авторизации пользователя
- Проверка прав доступа к компании
- Изоляция данных между компаниями

## Использование

1. Авторизуйтесь в системе
2. Перейдите на `/companies` для выбора компании
3. Создайте новую компанию или выберите существующую
4. Управляйте компанией через URL `/{shortName}/Index`

## Технические детали

- **Middleware**: `CompanyMiddleware` для обработки URL компаний
- **Сервис**: `CompanyService` для работы с компаниями
- **База данных**: Таблицы `Companies` и `CompanyUsers`
- **Контроллер**: `CompanyController` для регистрации
- **Страницы**: `CompanySelect`, `CompanyAdmin`