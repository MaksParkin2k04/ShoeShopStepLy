# Обновление системы управления остатками

## Новые возможности

### 1. Автоматическое уменьшение остатков при покупке
- При создании заказа количество товаров автоматически уменьшается
- Остатки обновляются для каждого товара в корзине по размерам

### 2. Проверка наличия при добавлении в корзину  
- Система проверяет наличие товара перед добавлением в корзину
- Если товара нет в наличии, показывается сообщение об ошибке
- Недоступные товары не добавляются в корзину

### 3. Улучшенное отображение статуса для пользователей
- **"В наличии"** - товара достаточно (≥5 пар)
- **"Осталось мало"** - товара мало (<5 пар, но >0)  
- **"Нет в наличии"** - товара нет (=0 пар)

## Технические изменения

### Обновленные файлы:
1. `StockService.cs` - добавлен метод `ReduceStockAsync()`
2. `CreatingOrder.cshtml.cs` - добавлено уменьшение остатков при заказе
3. `Product.cshtml.cs` - добавлена проверка наличия при добавлении в корзину
4. `Product.cshtml` - добавлено отображение статуса и сообщений об ошибках
5. `stock-styles.css` - добавлены стили для статуса "В наличии"

### Логика работы:
1. **При добавлении в корзину**: проверяется наличие товара по размеру
2. **При создании заказа**: остатки уменьшаются на 1 для каждого товара
3. **При отображении**: показывается актуальный статус наличия

## Использование

### Для клиентов:
- Видят актуальную информацию о наличии товара
- Не могут добавить в корзину недоступные товары
- Получают уведомления о статусе товара

### Для администраторов:
- Остатки автоматически обновляются при продажах
- Можно добавлять приход товара через админ панель
- Видят актуальные остатки в реальном времени

Система теперь полностью автоматизирована и обеспечивает точный учет остатков товаров.